!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.greinerHormann=e()}}(function(){return function e(t,r,n){function o(s,u){if(!r[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t){var r=e("./lib/intersect"),n=e("./lib/union"),o=e("./lib/util");t.exports={union:n,intersect:r,utils:o}},{"./lib/intersect":3,"./lib/union":6,"./lib/util":7}],2:[function(e,t){function r(e,t,r,n,o,i,s){if(0!=e.length)return e;if(!i&&!s)return v.compare(n,o)?[[t]]:[[t],[r]];if(i&&s&&v.compare(n,o))return[[t]];if(i^1==s){var u,a,p,c;!i&&s?(u=f(r[0]),a=n,p=t,c=r):(u=f(t[0]),a=o,p=r,c=t);var h=l(u,a);return h?[[p,c]]:[[p]]}}function n(e){for(var t=e.first,r=[];t=e.firstIntersect();){var n=[[t.x,t.y]];do{if(t.checked=!0,t.neighbor&&(t.neighbor.checked=!0),t.entry){do t=t.next,n.push([t.x,t.y]);while(!t.intersect)}else do t=t.prev,n.push([t.x,t.y]);while(!t.intersect);t=t.neighbor}while(!t.checked);r.push([n])}return r}function o(e,t,r,n){var o=e.first;do{u(o,n);var i=t.first;if(!o.intersect)do{if(u(i,r),!i.intersect){var a=e.nextNonIntersect(o.next),p=t.nextNonIntersect(i.next),l=c(o,a,i,p);l&&(i=s(e,t,o,a,i,p,l))}i=i.next}while(i!=t.first);o=o.next}while(o!=e.first)}function i(e){var t=e.first;do t.degenerate&&(t.intersect=!0,t.neighbor.intersect=!0),t=t.next;while(t!=e.first)}function s(e,t,r,n,o,i,s){var u,a,p=0<s.alphaA&&s.alphaA<1,c=0<s.alphaB&&s.alphaB<1;return p&&c?(u=new g(s.x,s.y,s.alphaA,!0),a=new g(s.x,s.y,s.alphaB,!0),e.insert(u,r,n),t.insert(a,o,i)):(p?(u=new g(s.x,s.y,s.alphaA,!0,!0),e.insert(u,r,e.nextNonIntersect(r.next))):0==s.alphaA?(r.intersect=!0,r.degenerate=!0,r.alpha=s.alphaA,u=r):1==s.alphaA&&(n.intersect=!1,n.degenerate=!0,n.alpha=s.alphaA,u=n),c?(a=new g(s.x,s.y,s.alphaB,!0,!0),t.insert(a,o,t.nextNonIntersect(o.next))):0==s.alphaB?(o.intersect=!0,o.degenerate=!0,o.alpha=s.alphaB,a=o):1==s.alphaB&&(i.intersect=!1,i.degenerate=!0,i.alpha=s.alphaB,a=i,o.next!=t.first&&(o=o.next))),u&&a&&(u.neighbor=a,a.neighbor=u,u.type="on",a.type="on"),o}function u(e,t){e.type||(e.type=l(f([e.x,e.y]),t)?"in":"out")}function a(e,t,r,n){var o=e.first,i=r,s=n;do{if(o.intersect){var u=o.areTypesEqual()&&o.neighbor.areTypesEqual();p(o,i,s,u),p(o.neighbor,s,i,u),!u&&o.entryIs(!i,!s)?(u=!0,o.type="out",o.neighbor.type="out"):!u&&o.entryIs(i,s)&&(u=!0,o.type="in",o.neighbor.type="in"),u&&(o.intersect=!1,o.neighbor.intersect=!1)}o=o.next}while(o!=e.first)}function p(e,t,r,n){e.typeIs("on","on")?e.neighbor.typeIs("on","on")?e.type="in":(p(e.neighbor,r,t,n),e.entry=t==r?!e.neighbor.entry:e.neighbor.entry,n&&(e.type="in"==e.neighbor.type?"out":"in")):e.typeIs("out","out")&&n?e.type="out":e.typeIs("in","in")&&n?e.type="in":e.typeIs("on","out")||e.typeIs("in","on")||e.typeIs("in","out")?e.entry=!t:(e.typeIs("on","in")||e.typeIs("out","on")||e.typeIs("out","in"))&&(e.entry=t)}function c(e,t,r,n){var o,i,s,u,a,p={x:null,y:null,onLine1:!1,onLine2:!1,alphaA:null,alphaB:null};return o=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y),0==o?e.equals(r)?(p.x=e.x,p.y=e.y,p.alphaA=0,p.alphaB=0,p):!1:(i=e.y-r.y,s=e.x-r.x,u=(n.x-r.x)*i-(n.y-r.y)*s,a=(t.x-e.x)*i-(t.y-e.y)*s,i=u/o,s=a/o,p.x=e.x+i*(t.x-e.x),p.y=e.y+i*(t.y-e.y),p.alphaA=i,p.alphaB=s,p.alphaA>.99999999999999&&(p.alphaA=1),p.alphaB>.99999999999999&&(p.alphaB=1),p.alphaA<1e-14&&(p.alphaA=0),p.alphaB<1e-14&&(p.alphaB=0),i>=0&&1>=i&&(p.onLine1=!0),s>=0&&1>=s&&(p.onLine2=!0),p.onLine1&&p.onLine2?p:!1)}var l=e("turf-inside"),f=e("turf-point"),h=e("turf-polygon"),y=e("./ring"),g=e("./vertex"),d=e("turf-is-clockwise"),v=new(e("geojson-equality"));t.exports=function(e,t,s,u){d(e)||e.reverse(),d(t)||t.reverse();try{var p=h([e]),c=h([t])}catch(l){console.log("Clipping error: bad polygons!"),console.log(e),console.log("-------------------"),console.log(t)}s=s===!1?!1:!0,u=u===!1?!1:!0;{var f=y.fromCoords(e),g=y.fromCoords(t);o(f,g,p,c)}i(f),a(f,g,s,u,p,c);var v=n(f);return r(v,e,t,p,c,s,u)}},{"./ring":4,"./vertex":8,"geojson-equality":9,"turf-inside":13,"turf-is-clockwise":14,"turf-point":15,"turf-polygon":16}],3:[function(e,t){var r=e("./greiner-hormann"),n=(e("turf-inside"),e("turf-point"),e("turf-polygon"),e("./union")),o=e("./util"),i=e("./subtract");t.exports=function(e,t){for(var e=o.clone(e),t=o.clone(t),s=o.outerHulls(e).concat(o.outerHulls(t)),u=o.holes(e).concat(o.holes(t)),a=[],p=0;p<s.length;p++)for(var c=p+1;c<s.length;c++){var l=r(s[p],s[c],!0,!0);Array.isArray(l)&&(a=a.concat(l))}if(u.length>0){var f=n(u);return i(a,o.outerHulls(f))}return a}},{"./greiner-hormann":2,"./subtract":5,"./union":6,"./util":7,"turf-inside":13,"turf-point":15,"turf-polygon":16}],4:[function(e,t){function r(){this.first=null}Vertex=e("./vertex"),r.fromCoords=function(e){for(var t=new r,n=0;n<e.length-1;n++){var o=e[n];t.push(new Vertex(o[0],o[1]))}return t},r.prototype.push=function(e){this.first?(next=this.first,prev=next.prev,next.prev=e,e.next=next,e.prev=prev,prev.next=e):(this.first=e,this.first.prev=e,this.first.next=e)},r.prototype.insert=function(e,t,r){for(var n=t.next;n!=r&&n.alpha<e.alpha;)n=n.next;e.next=n,prev=n.prev,e.prev=prev,prev.next=e,n.prev=e},r.prototype.nextNonIntersect=function(e){for(var t=e;t.intersect&&t!=this.first&&t.next!=this.first;)t=t.next;return t},r.prototype.firstIntersect=function(){for(var e=this.first;;){if(e.intersect&&!e.checked)return e;if(e=e.next,e==this.first)break}return!1},r.prototype.toArray=function(){var e=this.first,t=[];do t.push([e.x,e.y]),e=e.next;while(e!=this.first);return t},t.exports=r},{"./vertex":8}],5:[function(e,t){var r=e("./util"),n=e("./greiner-hormann");t.exports=function(e,t){e=r.clone(e),t=r.clone(t);for(var o=0;o<t.length;o++){for(var i=e.length,s=0;s<e.length;s++){var u=n(e[s][0],t[o],!1,!0);e[s][0]=u[0][0];for(var a=1;a<u[0].length;a++)e[s].push(u[0][a]);for(var a=1;a<u.length;a++)e.push(u[a])}i!=e.length&&(t.splice(o,1),o--)}return e}},{"./greiner-hormann":2,"./util":7}],6:[function(e,t){function r(e){for(var t=0;t<e.length;t++)for(var r=t+1;r<e.length;r++)if(t!=r){var i=o.outerHulls(n(e[t],e[r],!1,!1));1==i.length&&(e[t]=i[0],e.splice(r,1),r=t)}return e}var n=e("./greiner-hormann"),o=e("./util"),i=e("./subtract");t.exports=function(e,t){if("undefined"!=typeof t&&null!=t)var e=e.concat(t);var e=o.clone(e),n=o.outerHulls(e),s=o.holes(e);return n=o.wrapToPolygons(r(n)),s.length>0?(s=r(s),i(n,s)):n}},{"./greiner-hormann":2,"./subtract":5,"./util":7}],7:[function(e,t,r){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),r.clone=function(e){for(var t=[],n=0;n<e.length;n++)t.push(Array.isArray(e[n])?r.clone(e[n]).slice():e[n]);return t},r.wrapToPolygons=function(e){for(var t=[],n=0;n<e.length;n++)r.isRing(e[n])?t.push([e[n]]):r.isMultiPolygon(e[n])?t.concat(e[n]):r.isPolygon(e[n])&&t.push(e[n]);return t},r.unwrap=function(e){for(var t=[],r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)t.push(e[r][n])},r.depth=function(e){function t(e,r){return Array.isArray(e)?t(e[0],r+1):r}return t(e,0)},r.isMultiPolygon=function(e){return 4==r.depth(e)?!0:!1},r.isPolygon=function(e){return 3==r.depth(e)?!0:!1},r.isRing=function(e){return 2==r.depth(e)?!0:!1},r.outerHulls=function(e){for(var t=[],n=0;n<e.length;n++)if(r.isMultiPolygon(e[n]))for(var o=0;o<e[n].length;o++)t.push(e[n][o][0]);else r.isPolygon(e[n])?t.push(e[n][0]):r.isRing(e[n])&&t.push(e[n]);return t},r.holes=function(e){for(var t=[],n=0;n<e.length;n++)if(r.isMultiPolygon(e[n]))for(var o=0;o<e[n].length;o++)for(var i=1;i<e[n][o].length;i++)t.push(e[n][o][i]);else if(r.isPolygon(e[n]))for(var o=1;o<e[n].length;o++)t.push(e[n][o]);return t}},{}],8:[function(e,t){function r(e,t,r,n,o){this.x=e,this.y=t,this.alpha=r||0,this.intersect=n||!1,this.entry=!0,this.checked=!1,this.degenerate=o||!1,this.neighbor=null,this.next=null,this.prev=null,this.type=null,this.justMarked=!1}r.prototype.equals=function(e){return this.x==e.x&&this.y==e.y?!0:!1},r.prototype.typeIs=function(e,t){return this.prev.type==e&&this.next.type==t?!0:!1},r.prototype.areTypesEqual=function(){return this.typeIs("on","on")||this.typeIs("out","out")||this.typeIs("in","in")?!0:!1},r.prototype.entryIs=function(e,t){return this.entry==e&&this.neighbor.entry==t?!0:!1},t.exports=r},{}],9:[function(e,t){function r(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function n(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}function o(e,t){return i(e,t,{strict:!0})}var i=e("deep-equal"),s=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=e&&e.direction?e.direction:!1,this.pseudoNode=e&&e.pseudoNode?e.pseudoNode:!1,this.objectComparator=e&&e.objectComparator?e.objectComparator:o};s.prototype.compare=function(e,t){if(e.type!==t.type||!n(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(0===e.type.indexOf("Multi")){var o=this,i=r(e),s=r(t);return i.every(function(e){return this.some(function(t){return o.compare(e,t)})},s)}}return!1},s.prototype.compareCoord=function(e,t){return e[0].toFixed(this.precision)===t[0].toFixed(this.precision)&&e[1].toFixed(this.precision)===t[1].toFixed(this.precision)},s.prototype.compareLine=function(e,t,r,o){if(!n(e,t))return!1;var i=this.pseudoNode?e:this.removePseudo(e),s=this.pseudoNode?t:this.removePseudo(t);if(!o||this.compareCoord(i[0],s[0])||(s=this.fixStartIndex(s,i))){var u=this.compareCoord(i[r],s[r]);return this.direction||u?this.comparePath(i,s):this.compareCoord(i[r],s[s.length-(1+r)])?this.comparePath(i.slice().reverse(),s):!1}},s.prototype.fixStartIndex=function(e,t){for(var r,n=-1,o=0;o<e.length;o++)if(this.compareCoord(e[o],t[0])){n=o;break}return n>=0&&(r=[].concat(e.slice(n,e.length),e.slice(1,n+1))),r},s.prototype.comparePath=function(e,t){var r=this;return e.every(function(e,t){return r.compareCoord(e,this[t])},t)},s.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var r=e.coordinates.slice(1,e.coordinates.length),n=t.coordinates.slice(1,t.coordinates.length),o=this;return r.every(function(e){return this.some(function(t){return o.compareLine(e,t,1,!0)})},n)}return!1},s.prototype.compareFeature=function(e,t){return e.id===t.id&&this.objectComparator(e.properties,t.properties)?this.compare(e.geometry,t.geometry):!1},s.prototype.removePseudo=function(e){return e},t.exports=s},{"deep-equal":10}],10:[function(e,t){function r(e){return null===e||void 0===e}function n(e){return e&&"object"==typeof e&&"number"==typeof e.length?"function"!=typeof e.copy||"function"!=typeof e.slice?!1:e.length>0&&"number"!=typeof e[0]?!1:!0:!1}function o(e,t,o){var p,c;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(u(e))return u(t)?(e=i.call(e),t=i.call(t),a(e,t,o)):!1;if(n(e)){if(!n(t))return!1;if(e.length!==t.length)return!1;for(p=0;p<e.length;p++)if(e[p]!==t[p])return!1;return!0}try{var l=s(e),f=s(t)}catch(h){return!1}if(l.length!=f.length)return!1;for(l.sort(),f.sort(),p=l.length-1;p>=0;p--)if(l[p]!=f[p])return!1;for(p=l.length-1;p>=0;p--)if(c=l[p],!a(e[c],t[c],o))return!1;return typeof e==typeof t}var i=Array.prototype.slice,s=e("./lib/keys.js"),u=e("./lib/is_arguments.js"),a=t.exports=function(e,t,r){return r||(r={}),e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:o(e,t,r)}},{"./lib/is_arguments.js":11,"./lib/keys.js":12}],11:[function(e,t,r){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();r=t.exports=i?n:o,r.supported=n,r.unsupported=o},{}],12:[function(e,t,r){function n(e){var t=[];for(var r in e)t.push(r);return t}r=t.exports="function"==typeof Object.keys?Object.keys:n,r.shim=n},{}],13:[function(e,t){function r(e,t){for(var r=!1,n=0,o=t.length-1;n<t.length;o=n++){var i=t[n][0],s=t[n][1],u=t[o][0],a=t[o][1],p=s>e[1]!=a>e[1]&&e[0]<(u-i)*(e[1]-s)/(a-s)+i;p&&(r=!r)}return r}t.exports=function(e,t){var n=t.geometry.coordinates,o=[e.geometry.coordinates[0],e.geometry.coordinates[1]];"Polygon"===t.geometry.type&&(n=[n]);for(var i=!1,s=0;s<n.length&&!i;){if(r(o,n[s][0])){for(var u=!1,a=1;a<n[s].length&&!u;)r(o,n[s][a])&&(u=!0),a++;u||(i=!0)}s++}return i}},{}],14:[function(e,t){t.exports=function(e){for(var t,r,n=0,o=1,i=e.length;i>o;)t=r||e[0],r=e[o],n+=(r[0]-t[0])*(r[1]+t[1]),o++;return n>0}},{}],15:[function(e,t){var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e,t){if(!r(e))throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:t||{}}}},{}],16:[function(e,t){t.exports=function(e,t){if(null===e)throw new Error("No coordinates passed");for(var r=0;r<e.length;r++)for(var n=e[r],o=0;o<n[n.length-1].length;o++){if(n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(n[n.length-1][o]!==n[0][o])throw new Error("First and last Position are not equivalent.")}var i={type:"Feature",geometry:{type:"Polygon",coordinates:e},properties:t};return i.properties||(i.properties={}),i}},{}]},{},[1])(1)});